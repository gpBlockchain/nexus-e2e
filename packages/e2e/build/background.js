/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={568:e=>{const r=(e=7,r=!1)=>{return Array.from({length:e},(t=r?16:36,"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?()=>{const e=crypto.getRandomValues(new Uint8Array(1))[0];return(e>=t?e%t:e).toString(t)}:()=>Math.floor(Math.random()*t).toString(t))).join("");var t};e.exports=r,e.exports.default=r},683:function(e,r){var t,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,t=function(e){"use strict";if("object"!=typeof globalThis||"object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",t="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",s=e=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(s).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=(r,t)=>(...s)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||s.length<=1&&!1!==t.singleCallbackArg?r.resolve(s[0]):r.resolve(s)},a=e=>1==e?"argument":"arguments",i=(e,r,t)=>new Proxy(r,{apply:(r,s,n)=>t.call(s,e,...n)});let g=Function.call.bind(Object.prototype.hasOwnProperty);const m=(e,r={},t={})=>{let s=Object.create(null),n={has:(r,t)=>t in e||t in s,get(n,l,c){if(l in s)return s[l];if(!(l in e))return;let A=e[l];if("function"==typeof A)if("function"==typeof r[l])A=i(e,e[l],r[l]);else if(g(t,l)){let r=((e,r)=>function(t,...s){if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((n,a)=>{if(r.fallbackToNoCallback)try{t[e](...s,o({resolve:n,reject:a},r))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),t[e](...s),r.fallbackToNoCallback=!1,r.noCallback=!0,n()}else r.noCallback?(t[e](...s),n()):t[e](...s,o({resolve:n,reject:a},r))}))})(l,t[l]);A=i(e,e[l],r)}else A=A.bind(e);else if("object"==typeof A&&null!==A&&(g(r,l)||g(t,l)))A=m(A,r[l],t[l]);else{if(!g(t,"*"))return Object.defineProperty(s,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(r){e[l]=r}}),A;A=m(A,r[l],t["*"])}return s[l]=A,A},set:(r,t,n,o)=>(t in s?s[t]=n:e[t]=n,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(s,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(s,r)},l=Object.create(e);return new Proxy(l,n)},l=e=>({addListener(r,t,...s){r.addListener(e.get(t),...s)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),c=new n((e=>"function"!=typeof e?e:function(r){const t=m(r,{},{getContent:{minArgs:0,maxArgs:0}});e(t)}));let A=!1;const u=new n((e=>"function"!=typeof e?e:function(r,s,n){let o,a,i=!1,g=new Promise((e=>{o=function(r){A||(console.warn(t,(new Error).stack),A=!0),i=!0,e(r)}}));try{a=e(r,s,o)}catch(e){a=Promise.reject(e)}const m=!0!==a&&((l=a)&&"object"==typeof l&&"function"==typeof l.then);var l;if(!0!==a&&!m&&!i)return!1;return(m?a:g).then((e=>{n(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),d=({reject:t,resolve:s},n)=>{e.runtime.lastError?e.runtime.lastError.message===r?s():t(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?t(new Error(n.message)):s(n)},p=(e,r,t,...s)=>{if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((e,r)=>{const n=d.bind(null,{resolve:e,reject:r});s.push(n),t.sendMessage(...s)}))},f={devtools:{network:{onRequestFinished:l(c)}},runtime:{onMessage:l(u),onMessageExternal:l(u),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},m(e,f,s)};e.exports=s(chrome)}else e.exports=globalThis.browser},void 0===(s=t.apply(r,[e]))||(e.exports=s)},565:function(e,r){var t,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,t=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=(r,t)=>(...s)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||s.length<=1&&!1!==t.singleCallbackArg?r.resolve(s[0]):r.resolve(s)},o=e=>1==e?"argument":"arguments",a=(e,r,t)=>new Proxy(r,{apply:(r,s,n)=>t.call(s,e,...n)});let i=Function.call.bind(Object.prototype.hasOwnProperty);const g=(e,r={},t={})=>{let s=Object.create(null),m={has:(r,t)=>t in e||t in s,get(m,l,c){if(l in s)return s[l];if(!(l in e))return;let A=e[l];if("function"==typeof A)if("function"==typeof r[l])A=a(e,e[l],r[l]);else if(i(t,l)){let r=((e,r)=>function(t,...s){if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((o,a)=>{if(r.fallbackToNoCallback)try{t[e](...s,n({resolve:o,reject:a},r))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),t[e](...s),r.fallbackToNoCallback=!1,r.noCallback=!0,o()}else r.noCallback?(t[e](...s),o()):t[e](...s,n({resolve:o,reject:a},r))}))})(l,t[l]);A=a(e,e[l],r)}else A=A.bind(e);else if("object"==typeof A&&null!==A&&(i(r,l)||i(t,l)))A=g(A,r[l],t[l]);else{if(!i(t,"*"))return Object.defineProperty(s,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(r){e[l]=r}}),A;A=g(A,r[l],t["*"])}return s[l]=A,A},set:(r,t,n,o)=>(t in s?s[t]=n:e[t]=n,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(s,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(s,r)},l=Object.create(e);return new Proxy(l,m)},m=e=>({addListener(r,t,...s){r.addListener(e.get(t),...s)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),l=new s((e=>"function"!=typeof e?e:function(r){const t=g(r,{},{getContent:{minArgs:0,maxArgs:0}});e(t)})),c=new s((e=>"function"!=typeof e?e:function(r,t,s){let n,o,a=!1,i=new Promise((e=>{n=function(r){a=!0,e(r)}}));try{o=e(r,t,n)}catch(e){o=Promise.reject(e)}const g=!0!==o&&((m=o)&&"object"==typeof m&&"function"==typeof m.then);var m;if(!0!==o&&!g&&!a)return!1;return(g?o:i).then((e=>{s(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),A=({reject:t,resolve:s},n)=>{e.runtime.lastError?e.runtime.lastError.message===r?s():t(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?t(new Error(n.message)):s(n)},u=(e,r,t,...s)=>{if(s.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${o(r.minArgs)} for ${e}(), got ${s.length}`);if(s.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${o(r.maxArgs)} for ${e}(), got ${s.length}`);return new Promise(((e,r)=>{const n=A.bind(null,{resolve:e,reject:r});s.push(n),t.sendMessage(...s)}))},d={devtools:{network:{onRequestFinished:m(l)}},runtime:{onMessage:m(c),onMessageExternal:m(c),sendMessage:u.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:u.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},g(e,d,t)};e.exports=t(chrome)}else e.exports=globalThis.browser},void 0===(s=t.apply(r,[e]))||(e.exports=s)}},r={};function t(s){var n=r[s];if(void 0!==n)return n.exports;var o=r[s]={exports:{}};return e[s].call(o.exports,o,o.exports,t),o.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";var e=t(565),r=t.n(e);let s=()=>({events:{},emit(e,...r){(this.events[e]||[]).forEach((e=>e(...r)))},on(e,r){return(this.events[e]=this.events[e]||[]).push(r),()=>this.events[e]=(this.events[e]||[]).filter((e=>e!==r))}});var n=t(683);class o extends Error{name="NonError";constructor(e){super(o._prepareSuperMessage(e))}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const a=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],i=Symbol(".toJSON was called"),g=({from:e,seen:r,to_:t,forceEnumerable:s,maxDepth:n,depth:o})=>{const m=t||(Array.isArray(e)?[]:{});if(r.push(e),o>=n)return m;if("function"==typeof e.toJSON&&!0!==e[i])return(e=>{e[i]=!0;const r=e.toJSON();return delete e[i],r})(e);for(const[t,a]of Object.entries(e))"function"==typeof Buffer&&Buffer.isBuffer(a)?m[t]="[object Buffer]":null===a||"object"!=typeof a||"function"!=typeof a.pipe?"function"!=typeof a&&(a&&"object"==typeof a?r.includes(e[t])?m[t]="[Circular]":(o++,m[t]=g({from:e[t],seen:[...r],forceEnumerable:s,maxDepth:n,depth:o})):m[t]=a):m[t]="[object Stream]";for(const{property:r,enumerable:t}of a)"string"==typeof e[r]&&Object.defineProperty(m,r,{value:e[r],enumerable:!!s||t,configurable:!0,writable:!0});return m};var m,l=t(568),c=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,A=e=>{const[,r,t,s]=e.match(c)||[];return{context:r,tabId:+t,frameId:s?+s:void 0}},u=e=>n[e],d=u("devtools")?"devtools":u("tabs")?(()=>{var e,r,t;const s=n.runtime.getManifest();if("undefined"==typeof window)return"background";const o=(null==(e=s.browser_action)?void 0:e.default_popup)||(null==(r=s.action)?void 0:r.default_popup);return o&&new URL(n.runtime.getURL(o)).pathname===window.location.pathname?"popup":(null==(t=s.options_ui)?void 0:t.page)&&new URL(n.runtime.getURL(s.options_ui.page)).pathname===window.location.pathname?"options":"background"})():u("extension")?"content-script":"undefined"!=typeof document?"window":null,p=l(),f=new Map,x=new Map,h=new Set,b=new Map,y=null;function w(e){const{origin:r,destination:t}=e;if(!e.hops.includes(p)&&(e.hops.push(p),"content-script"!==d||![t,r].some((e=>"window"===(null==e?void 0:e.context))))){if(!t)return async function(e){const{transactionId:r,messageID:t,messageType:s}=e;switch(s){case"reply":return(()=>{const t=f.get(r);if(t){const{err:s,data:n}=e;if(s){const e=s,r=self[e.name],n=new("function"==typeof r?r:Error)(e.message);for(const r in e)n[r]=e[r];t.reject(n)}else t.resolve(n);f.delete(r)}})();case"message":return(async()=>{let r,s,n=!1;try{const o=x.get(t);if("function"!=typeof o)throw n=!0,new Error(`[webext-bridge] No handler registered in '${d}' to accept messages with id '${t}'`);r=await o({sender:e.origin,id:t,data:e.data,timestamp:e.timestamp})}catch(e){s=e}finally{if(s&&(e.err=function(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=r;return"object"==typeof e&&null!==e?g({from:e,seen:[],forceEnumerable:!0,maxDepth:t,depth:0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e}(s)),w({...e,messageType:"reply",data:r,origin:{context:d,tabId:null},destination:e.origin,hops:[]}),s&&!n)throw r}})()}}(e);if(t.context){if("window"===d)return k(window,e);if("content-script"===d&&"window"===t.context)return e.destination=null,k(window,e);if(["devtools","content-script","popup","options"].includes(d))return"background"===t.context&&(e.destination=null),y.postMessage(e);if("background"===d){const{context:s,tabId:n,frameId:o}=t,{tabId:a}=r;"window"!==s?e.destination=null:e.destination.tabId=null;let i=["popup","options"].includes(s)?s:`${"window"===s?"content-script":s}@${n||a}`;o&&(i=`${i}.${o}`);const g=b.get(i);g?g.postMessage(e):h.add({resolvedDestination:i,message:e})}}}}async function v({data:e,ports:r}){if("content-script"!==d)if("__crx_bridge_verify_listening"===e.cmd&&e.scope===m&&e.context!==d)r[0].postMessage(!0);else if("__crx_bridge_route_message"===e.cmd&&e.scope===m&&e.context!==d){const{payload:r}=e;"content-script"===d&&(r.origin={context:"window",tabId:null}),w(r)}}function k(e,r){!function(){throw new Error("webext-bridge uses window.postMessage to talk with other \"window\"(s), for message routing and stuff,which is global/conflicting operation in case there are other scripts using webext-bridge. Call Bridge#setNamespace(nsps) to isolate your app. Example: setNamespace('com.facebook.react-devtools'). Make sure to use same namespace across all your scripts whereever window.postMessage is likely to be used`")}();const t=new MessageChannel,s=setTimeout((()=>{t.port1.onmessage=null,k(e,r)}),300);t.port1.onmessage=()=>{clearTimeout(s),e.postMessage({cmd:"__crx_bridge_route_message",scope:m,context:d,payload:r},"*")},e.postMessage({cmd:"__crx_bridge_verify_listening",scope:m,context:d},"*",[t.port2])}function _(e,r){x.set(e,r)}async function E(e,r,t="background"){const s="string"==typeof t?A(t):t,n="Bridge#sendMessage ->";if(!s.context)throw new TypeError(`${n} Destination must be any one of known destinations`);if("background"===d){const{context:e,tabId:r}=s;if("background"!==e&&!r)throw new TypeError(`${n} When sending messages from background page, use @tabId syntax to target specific tab`)}return new Promise(((t,n)=>{const o={messageID:e,data:r,destination:s,messageType:"message",transactionId:l(),origin:{context:d,tabId:null},hops:[],timestamp:Date.now()};f.set(o.transactionId,{resolve:t,reject:n}),w(o)}))}!function e(){if(null===d)throw new Error("Unable to detect runtime context i.e webext-bridge can't figure out what to do");if("window"!==d&&"content-script"!==d||window.addEventListener("message",v),"content-script"===d&&top===window&&((y=n.runtime.connect()).onMessage.addListener((e=>{w(e)})),y.onDisconnect.addListener((()=>{y=null,e()}))),"content-script"===d&&top!==window&&((y=n.runtime.connect()).onMessage.addListener((e=>{w(e)})),y.onDisconnect.addListener((()=>{y=null,e()}))),"devtools"===d){const{tabId:r}=n.devtools.inspectedWindow,t=`devtools@${r}`;(y=n.runtime.connect(void 0,{name:t})).onMessage.addListener((e=>{w(e)})),y.onDisconnect.addListener((()=>{y=null,e()}))}if("popup"===d||"options"===d){const r=`${d}`;(y=n.runtime.connect(void 0,{name:r})).onMessage.addListener((e=>{w(e)})),y.onDisconnect.addListener((()=>{y=null,e()}))}"background"===d&&n.runtime.onConnect.addListener((e=>{let r=e.name||`content-script@${e.sender.tab.id}`;const t=e.sender.frameId;t&&(r=`${r}.${t}`);const{context:s,tabId:n,frameId:o}=A(r);(n||"popup"===s||"options"===s)&&(b.set(r,e),h.forEach((t=>{t.resolvedDestination===r&&(e.postMessage(t.message),h.delete(t))})),e.onDisconnect.addListener((()=>{b.delete(r)})),e.onMessage.addListener((e=>{var r;(null==(r=null==e?void 0:e.origin)?void 0:r.context)&&(e.origin.tabId=n,e.origin.frameId=o,w(e))})))}))}();var C=class{constructor(e){this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},this.internalInfo=e,this.emitter=s(),this.isClosed=!1,C.initDone||(_("__crx_bridge_stream_transfer__",(e=>{const{streamId:r,streamTransfer:t,action:s}=e.data,n=C.openStreams.get(r);n&&!n.isClosed&&("transfer"===s&&n.emitter.emit("message",t),"close"===s&&(C.openStreams.delete(r),n.handleStreamClose()))})),C.initDone=!0),C.openStreams.set(e.streamId,this)}get info(){return this.internalInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");E("__crx_bridge_stream_transfer__",{streamId:this.internalInfo.streamId,streamTransfer:e,action:"transfer"},this.internalInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),E("__crx_bridge_stream_transfer__",{streamId:this.internalInfo.streamId,streamTransfer:null,action:"close"},this.internalInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,r){const t=this.emitter.on(e,r);return Object.assign(t,{dispose:t,close:t})}},T=C;T.initDone=!1,T.openStreams=new Map;var P=new Map,L=s();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function I(){I=function(){return e};var e={},r=Object.prototype,t=r.hasOwnProperty,s=Object.defineProperty||function(e,r,t){e[r]=t.value},n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function g(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{g({},"")}catch(e){g=function(e,r,t){return e[r]=t}}function m(e,r,t,n){var o=r&&r.prototype instanceof A?r:A,a=Object.create(o.prototype),i=new E(n||[]);return s(a,"_invoke",{value:w(e,t,i)}),a}function l(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=m;var c={};function A(){}function u(){}function d(){}var p={};g(p,o,(function(){return this}));var f=Object.getPrototypeOf,x=f&&f(f(C([])));x&&x!==r&&t.call(x,o)&&(p=x);var h=d.prototype=A.prototype=Object.create(p);function b(e){["next","throw","return"].forEach((function(r){g(e,r,(function(e){return this._invoke(r,e)}))}))}function y(e,r){function n(s,o,a,i){var g=l(e[s],e,o);if("throw"!==g.type){var m=g.arg,c=m.value;return c&&"object"==j(c)&&t.call(c,"__await")?r.resolve(c.__await).then((function(e){n("next",e,a,i)}),(function(e){n("throw",e,a,i)})):r.resolve(c).then((function(e){m.value=e,a(m)}),(function(e){return n("throw",e,a,i)}))}i(g.arg)}var o;s(this,"_invoke",{value:function(e,t){function s(){return new r((function(r,s){n(e,t,r,s)}))}return o=o?o.then(s,s):s()}})}function w(e,r,t){var s="suspendedStart";return function(n,o){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw o;return{value:void 0,done:!0}}for(t.method=n,t.arg=o;;){var a=t.delegate;if(a){var i=v(a,t);if(i){if(i===c)continue;return i}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===s)throw s="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);s="executing";var g=l(e,r,t);if("normal"===g.type){if(s=t.done?"completed":"suspendedYield",g.arg===c)continue;return{value:g.arg,done:t.done}}"throw"===g.type&&(s="completed",t.method="throw",t.arg=g.arg)}}}function v(e,r){var t=r.method,s=e.iterator[t];if(void 0===s)return r.delegate=null,"throw"===t&&e.iterator.return&&(r.method="return",r.arg=void 0,v(e,r),"throw"===r.method)||"return"!==t&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+t+"' method")),c;var n=l(s,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,c;var o=n.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,c):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,c)}function k(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function _(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,n=function r(){for(;++s<e.length;)if(t.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:T}}function T(){return{value:void 0,done:!0}}return u.prototype=d,s(h,"constructor",{value:d,configurable:!0}),s(d,"constructor",{value:u,configurable:!0}),u.displayName=g(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===u||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,g(e,i,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},b(y.prototype),g(y.prototype,a,(function(){return this})),e.AsyncIterator=y,e.async=function(r,t,s,n,o){void 0===o&&(o=Promise);var a=new y(m(r,t,s,n),o);return e.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(h),g(h,i,"Generator"),g(h,o,(function(){return this})),g(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var r=Object(e),t=[];for(var s in r)t.push(s);return t.reverse(),function e(){for(;t.length;){var s=t.pop();if(s in r)return e.value=s,e.done=!1,e}return e.done=!0,e}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&t.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function s(t,s){return a.type="throw",a.arg=e,r.next=t,s&&(r.method="next",r.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var i=t.call(o,"catchLoc"),g=t.call(o,"finallyLoc");if(i&&g){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,r){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&t.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),c},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),_(t),c}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var s=t.completion;if("throw"===s.type){var n=s.arg;_(t)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:C(e),resultName:r,nextLoc:t},"next"===this.method&&(this.arg=void 0),c}},e}function S(e,r,t,s,n,o,a){try{var i=e[o](a),g=i.value}catch(e){return void t(e)}i.done?r(g):Promise.resolve(g).then(s,n)}function M(e){return function(){var r=this,t=arguments;return new Promise((function(s,n){var o=e.apply(r,t);function a(e){S(o,s,n,a,i,"next",e)}function i(e){S(o,s,n,a,i,"throw",e)}a(void 0)}))}}_("__crx_bridge_stream_open__",(e=>new Promise((r=>{const{sender:t,data:s}=e,{channel:n}=s;let o=!1,a=()=>{};const i=()=>{const e=P.get(n);"function"==typeof e?(e(new T({...s,endpoint:t})),o&&a(),r(!0)):o||(o=!0,a=L.on("did-change-stream-callbacks",i))};i()})))),_("notification",M(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r().windows.create({type:"popup",focused:!0,left:200,width:360,height:600,url:"popup.html"});case 1:case"end":return e.stop()}}),e)}))))})()})();
//# sourceMappingURL=background.js.map